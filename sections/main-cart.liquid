<div class="container mx-auto px-4 py-24 min-h-screen" id="cart-container">
  <h1 class="text-6xl font-black font-syne uppercase mb-12 text-outline glitch-text" data-text="KOSÁR">KOSÁR</h1>

  {% if cart.item_count > 0 %}
    <form action="{{ routes.cart_url }}" method="post" novalidate id="cart-form" class="relative">
      <!-- Loading Overlay -->
      <div id="cart-loader" class="absolute inset-0 bg-black/50 z-50 hidden flex items-center justify-center backdrop-blur-sm">
        <div class="w-12 h-12 border-4 border-[#FF9E00] border-t-transparent rounded-full animate-spin"></div>
      </div>

      <div class="border-t border-white/20" id="cart-items">
        {% for item in cart.items %}
          <div class="grid grid-cols-12 gap-4 py-8 border-b border-white/20 items-center cart-item transition-all duration-500" data-key="{{ item.key }}">
            <div class="col-span-3 md:col-span-2">
              {% if item.image %}
                {{ item.image | image_url: width: 300 | image_tag: class: 'w-full aspect-square object-cover border border-white/10' }}
              {% endif %}
            </div>
            <div class="col-span-7 md:col-span-6">
              <h3 class="font-syne font-bold text-xl uppercase mb-1">
                <a href="{{ item.url }}" class="no-underline text-white hover:text-[#FF9E00]">{{ item.product.title }}</a>
              </h3>
              <p class="font-mono text-sm text-gray-400">{{ item.variant.title }}</p>
              <p class="font-mono text-sm text-[#FF9E00] mt-2">{{ item.final_price | money }}</p>
            </div>
            
            <!-- Quantity -->
            <div class="col-span-2 md:col-span-2">
                <div class="flex items-center border border-white/20 bg-black">
                    <button type="button" class="px-2 text-[#FF9E00] hover:bg-white/10 qty-btn" data-action="minus">-</button>
                    <input type="number" name="updates[]" value="{{ item.quantity }}" min="0" data-key="{{ item.key }}" class="w-full bg-transparent text-center font-mono py-2 outline-none text-white appearance-none qty-input">
                    <button type="button" class="px-2 text-[#FF9E00] hover:bg-white/10 qty-btn" data-action="plus">+</button>
                </div>
            </div>

            <!-- Remove & Total -->
            <div class="col-span-12 md:col-span-2 text-right flex flex-row md:flex-col justify-between items-center md:items-end mt-4 md:mt-0">
              <p class="font-mono font-bold item-total">{{ item.final_line_price | money }}</p>
              <button type="button" class="text-xs font-mono text-red-500 hover:text-red-400 uppercase mt-2 remove-btn" data-key="{{ item.key }}">
                [TÖRLÉS]
              </button>
            </div>
          </div>
        {% endfor %}
      </div>

      <div class="mt-12 flex flex-col md:flex-row justify-between items-start">
        <!-- Coupon Code -->
        <div class="w-full md:w-1/3 mb-8 md:mb-0">
            <label class="block font-mono text-xs text-[#FF9E00] mb-2 uppercase">KUPON KÓD</label>
            <div class="flex">
                <input type="text" name="discount" id="discount-input" placeholder="KÓD" class="bg-black border border-white/20 text-white p-3 font-mono outline-none focus:border-[#FF9E00] w-full uppercase">
            </div>
            <p class="font-mono text-[10px] text-gray-500 mt-2">*A KEDVEZMÉNY A FIZETÉSNÉL KERÜL LEVONÁSRA.</p>
        </div>

        <!-- Totals & Actions -->
        <div class="w-full md:w-1/3 flex flex-col items-end">
            <div class="flex justify-between w-full mb-4 font-mono text-xl border-b border-white/10 pb-4">
                <span>ÖSSZESEN:</span>
                <span class="text-[#FF9E00] font-bold" id="cart-total">{{ cart.total_price | money }}</span>
            </div>
            <p class="font-mono text-xs text-gray-500 mb-8">ADÓK ÉS SZÁLLÍTÁS A PÉNZTÁRNÁL SZÁMOLVA.</p>
            
            <button type="submit" name="checkout" id="checkout-btn" class="w-full bg-[#FF9E00] text-black px-8 py-4 font-bold uppercase tracking-wider hover:bg-[#CCFF00] transition-colors shadow-[4px_4px_0px_0px_#ffffff] cursor-none-target relative overflow-hidden group">
                <span class="relative z-10">FIZETÉS INDÍTÁSA</span>
                <div class="absolute inset-0 bg-white transform -translate-x-full group-hover:translate-x-0 transition-transform duration-300 mix-blend-difference"></div>
            </button>
        </div>
      </div>
    </form>
  {% else %}
    <div class="text-center py-20 border border-white/10 bg-[#111]">
        <div class="text-6xl mb-4">∅</div>
        <p class="font-mono text-xl mb-8">A KOSARAD ÜRES.</p>
        <a href="{{ routes.all_products_collection_url }}" class="bg-[#FF9E00] text-black px-8 py-4 font-bold uppercase tracking-wider hover:bg-[#CCFF00] transition-colors cursor-none-target inline-block">
            VÁSÁRLÁS KEZDÉSE
        </a>
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Cart",
  "settings": []
}
{% endschema %}
